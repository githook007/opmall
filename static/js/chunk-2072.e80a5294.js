(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2072"],{"+PKF":function(s,t,a){},"Q/xG":function(s,t,a){"use strict";a.r(t);var e=a("14Xm"),i=a.n(e),n=a("D3Ub"),c=a.n(n),r=a("QbLZ"),o=a.n(r),l=a("vvji"),u=a("L2JU"),d={name:"GoodsListIndex",components:{GoodsList:l.a},data:function(){return{searchParams:{keyword:"",currentPage:1,limit:10,catId:"",sort:"",sortType:"",price:2,sale:2},menuIdx1:0,menuIdx2:0,menuIdx3:0,total:0,goodsList:[]}},computed:o()({},Object(u.b)(["baseConfig"])),watch:{$route:function(s){var t=s.query;this.searchParams.keyword=t.search||"",this.menuIdx1=0,this.menuIdx2=0,this.menuIdx3=0,t.menuIdx1&&(this.menuIdx1=Number(t.menuIdx1)),t.menuIdx2&&(this.menuIdx2=Number(t.menuIdx2)),t.menuIdx3&&(this.menuIdx3=Number(t.menuIdx3))},searchParams:{handler:function(){this.loadGoodsList()},deep:!0}},mounted:function(){this.searchParams.keyword=this.$route.query.search||"",this.$route.query.menuIdx1&&(this.menuIdx1=Number(this.$route.query.menuIdx1)),this.$route.query.menuIdx2&&(this.menuIdx2=Number(this.$route.query.menuIdx2)),this.$route.query.menuIdx3&&(this.menuIdx3=Number(this.$route.query.menuIdx3)),this.loadSideBaseConfig(),this.loadGoodsList()},methods:{loadSideBaseConfig:function(){var s=this;c()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.$service.getSiteBaseConfig();case 2:0===(a=t.sent).code?s.$store.commit("SET_BASE_CONFIG",a.data):s.$message.error(a.msg);case 4:case"end":return t.stop()}},t,s)}))()},loadGoodsList:function(){var s=this;c()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.$service.webMallLoadGoodsList(s.searchParams);case 2:0===(a=t.sent).code?(s.goodsList=a.data.list,s.total=a.data.pagination.totalCount):s.$message.error(a.msg);case 4:case"end":return t.stop()}},t,s)}))()},bindOrderPriceClick:function(s){this.searchParams.sort="price"===s?3:"sale"===s?4:1,this.searchParams[s]=1===this.searchParams[s]?2:2===this.searchParams[s]?0:1,this.searchParams.sortType=this.searchParams[s],"price"===s?this.searchParams.sale=2:this.searchParams.price=2},handleCurrentChange:function(s){this.searchParams.currentPage=s}}},m=(a("uNMi"),a("KHd+")),v=Object(m.a)(d,function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"app-container"},[a("el-breadcrumb",{staticClass:"breadcrumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[s._v("首页")]),s._v(" "),a("el-breadcrumb-item",[s._v("商品搜索")]),s._v(" "),s.searchParams.keyword?a("el-breadcrumb-item",[s._v(s._s(s.searchParams.keyword))]):s._e()],1),s._v(" "),a("div",{staticClass:"tab-bar"},[a("div",{staticClass:"cate"},[a("div",{staticClass:"text"},[s._v("分类：")]),s._v(" "),a("ul",{staticClass:"list"},[a("li",{staticClass:"item",class:{active:0===s.menuIdx1},on:{click:function(t){s.menuIdx1=0,s.menuIdx2=0,s.menuIdx3=0}}},[s._v("全部")]),s._v(" "),s._l(s.baseConfig.cat_list,function(t,e){return a("li",{key:e,staticClass:"item",class:{active:s.menuIdx1===e+1},on:{click:function(a){s.menuIdx1=e+1,s.menuIdx2=0,s.menuIdx3=0,s.searchParams.catId=t.id}}},[s._v("\n          "+s._s(t.name)+"\n        ")])})],2)]),s._v(" "),a("div",{staticClass:"cate"},[a("div",{staticClass:"text"},[s._v("子分类：")]),s._v(" "),a("ul",{staticClass:"list"},[a("li",{staticClass:"item",class:{active:0===s.menuIdx2},on:{click:function(t){s.menuIdx2=0,s.menuIdx3=0}}},[s._v("全部")]),s._v(" "),0!==s.menuIdx1?s._t("default",s._l(s.baseConfig.cat_list[s.menuIdx1>0?s.menuIdx1-1:0].child,function(t,e){return a("li",{key:e,staticClass:"item",class:{active:s.menuIdx2===e+1},on:{click:function(a){s.menuIdx2=e+1,s.menuIdx3=0,s.searchParams.catId=t.id}}},[s._v("\n            "+s._s(t.name)+"\n          ")])})):s._e()],2)]),s._v(" "),a("div",{staticClass:"cate"},[a("div",{staticClass:"text"},[s._v("子分类：")]),s._v(" "),a("ul",{staticClass:"list"},[a("li",{staticClass:"item",class:{active:0===s.menuIdx3},on:{click:function(t){s.menuIdx3=0}}},[s._v("全部")]),s._v(" "),0!==s.menuIdx2?s._t("default",s._l(s.baseConfig.cat_list[s.menuIdx1>0?s.menuIdx1-1:0].child[s.menuIdx2>0?s.menuIdx2-1:0].child,function(t,e){return a("li",{key:e,staticClass:"item",class:{active:s.menuIdx3===e+1},on:{click:function(a){s.menuIdx3=e+1,s.searchParams.catId=t.id}}},[s._v("\n            "+s._s(t.name)+"\n          ")])})):s._e()],2)]),s._v(" "),a("div",{staticClass:"sort"},[a("div",{staticClass:"text"},[s._v("排序：")]),s._v(" "),a("ul",{staticClass:"list"},[a("li",{staticClass:"item",class:{active:2===s.searchParams.price&&2===s.searchParams.sale},on:{click:function(t){s.searchParams.price=2,s.searchParams.sale=2,s.searchParams.sort=1}}},[s._v("默认\n        ")]),s._v(" "),a("div",{staticClass:"item",class:{active:2!==s.searchParams.price},on:{click:function(t){s.bindOrderPriceClick("price")}}},[s._v("\n          价格\n          "),2===s.searchParams.price?a("i",{staticClass:"el-icon-d-caret"}):s._e(),s._v(" "),0===s.searchParams.price?a("i",{staticClass:"el-icon-caret-bottom"}):s._e(),s._v(" "),1===s.searchParams.price?a("i",{staticClass:"el-icon-caret-top"}):s._e()]),s._v(" "),a("li",{staticClass:"item",class:{active:2!==s.searchParams.sale},on:{click:function(t){s.bindOrderPriceClick("sale")}}},[s._v("\n          销量\n          "),2===s.searchParams.sale?a("i",{staticClass:"el-icon-d-caret"}):s._e(),s._v(" "),0===s.searchParams.sale?a("i",{staticClass:"el-icon-caret-bottom"}):s._e(),s._v(" "),1===s.searchParams.sale?a("i",{staticClass:"el-icon-caret-top"}):s._e()])])])]),s._v(" "),a("div",{staticClass:"goods-list"},[a("goods-list",{attrs:{"goods-list":s.goodsList}})],1),s._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":s.searchParams.currentPage,"page-size":s.searchParams.limit,total:s.total,"pager-count":5,background:"",layout:"slot, prev, pager, next"},on:{"current-change":s.handleCurrentChange}},[s._t("default",[a("span",{staticClass:"el-pagination__total"},[s._v("共 "+s._s(s.total)+" 件商品")])])],2)],1)],1)},[],!1,null,"44268606",null);v.options.__file="index.vue";t.default=v.exports},YVqe:function(s,t,a){"use strict";var e=a("yJBn");a.n(e).a},uNMi:function(s,t,a){"use strict";var e=a("+PKF");a.n(e).a},vvji:function(s,t,a){"use strict";var e={name:"GoodsListComponents",components:{},props:{goodsList:{type:Array,default:function(){return[]}}},data:function(){return{}},methods:{toDetails:function(s,t){window.open(this.$config.DOMAIN+"/index.html#/goods/details?id="+s+"&mch_id="+t)}}},i=(a("YVqe"),a("KHd+")),n=Object(i.a)(e,function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ul",{staticClass:"goods-list"},s._l(s.goodsList,function(t,e){return a("li",{key:e,staticClass:"goods-item",on:{click:function(a){s.toDetails(t.id,t.mch_id)}}},[a("div",{staticClass:"goods-img"},[a("el-image",{attrs:{src:t.cover_pic,fit:"fill",alt:""}})],1),s._v(" "),a("p",{staticClass:"goods-name"},[s._v(s._s(t.name))]),s._v(" "),a("div",{staticClass:"goods-info"},[a("div",{staticClass:"price"},[s._v("￥"+s._s(t.original_price))]),s._v(" "),a("div",{staticClass:"sale"},[s._v("销量："+s._s(t.sales))])]),s._v(" "),a("div",{staticClass:"goods-price"},[s._v(s._s(t.price))])])}))},[],!1,null,"3474e012",null);n.options.__file="goodsList.vue";t.a=n.exports},yJBn:function(s,t,a){}}]);